{# List of events in table; to be included.
Requires 'events' list and 'show_event_link' and 'show_member_col' flags.
Also include 'events_list_javascript.html'.
#}

<table class="table table-sm" id="events">
  <thead>
    <tr>
      <th scope="col" class="break">Event</th>
      {% if show_member_col %}
      <th scope="col" class="break">Member</th>
      {% end %}
      <th scope="col" class="break">Specification</th>
      <th scope="col" class="break">Payment</th>
      <th scope="col" class="break">Credit  ({{ settings['CURRENCY'] }})</th>
      <th scope="col" class="break">Timestamp</th>
    </tr>
  </thead>
  <tbody>
    {% set store = {} %}
    {% for event in events %}
    <tr class="{% module Step(event['log']['date'], ['table-active', 'table-light'], store) %}">
      <td>
        {% if show_event_links %}
        <a href="{{ reverse_url('event', event['_id']) }}">
          {{ event['action'] }}</a>
        {% else %}
        {{ event['action'] }}
        {% end %}
      </td>
      {% if show_member_col %}
      <td>{{ event['member'] }}</td>
      {% end %}
      <td>{{ event.get('beverage') or '-' }}</td>
      <td>{{ event.get('payment') or '-' }}</td>
      <td>{% module Money(event['credit'], currency=False) %}</td>
      <td class="localtime small">{{ event['log']['timestamp'] }}</td>
    </tr>
    {% end %} {# for event in events #}
  </tbody>
</table>
