{# Members page. #}

{% extends 'base.html' %}

{% block head_title %}Members{% end %}

{% block body_title %}Members{% end %}

{% block content %}
<div class="row my-4">
  <div class="col-md">
    <table id="members" class="table table-sm">
      <thead>
        <th scope="col"></th>
        <th scope="col">Member</th>
        <th scope="col">Name</th>
        <th scope="col">Balance ({{ currency }})</th>
        <th scope="col">Role</th>
        <th scope="col">Status</th>
        <th scope="col">Last login</th>
      </thead>
      <tbody>
        {% for member in members %}
        <tr>
          <td>
            <a href="{{ reverse_url('repayment', member['email']) }}"
               class="btn btn-sm btn-warning"
               role="button" target="_blank">Repay</a>
          </td>
          <td>
            <a href="{{ reverse_url('member', member['email']) }}"
              class="break">
              {{ member['email'] }}</a>
          </td>
          <td>{{ member['name'] }}</td>
          <td>{% module Money(get_balance(member), currency=False) %}</td>
          <td>{% module Role(member) %}</td>
          <td>{% module Status(member) %}</td>
          <td>{% module LastLogin(member) %}</td>
        </tr>
        {% end %}
      </tbody>
    </table>
  </div>
</div>
{% end %} {# block content #}

{% block javascript %}
<script>
  $(function() {
    $("#members").DataTable( {
      "pagingType": "full_numbers",
      "order": [[ 6, "desc"]],
    });
  });
</script>
{% end %} {# block javascript #}
