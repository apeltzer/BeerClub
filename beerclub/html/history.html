{# Account history page. #}

{% extends 'base.html' %}

{% block head_title %}History{% end %}

{% block body_title %}
History 
<a href="{{ reverse_url('account', account['email']) }}">
  {{ account['email'] }}</a>
{% end %}

{% block content %}
<h5 class="my-4">
  Current credit: {% module Money(get_credit(account), padding=0) %}
</h5>
{% include 'events_list.html' %}
<p>
  {% if all %}
  <a href="{{ reverse_url('history', account['email']) }}"
     class="btn btn-primary btn-sm">Show recent events</a>
</p>
{% else %}
<p class="mt-4 mb-1">
  Max {{ settings['DISPLAY_MAX_HISTORY'] }} events shown.
</p>
<p>
  <a href="{{ reverse_url('history_all', account['email']) }}"
     class="btn btn-primary btn-sm">Show all events</a>
</p>
{% end %}
{% end %} {# block content #}

{% block javascript %}
{% if all%}
<script>
  $(function() {
    $("#events").DataTable( {
      "pagingType": "full_numbers",
      "order": [[ 4, "desc"]],
    });
  });
</script>
{% end %} {# if all #}
{% end %} {# block javascript #}
